---
title: å‡çº§æŒ‡å—
description: 'å­¦ä¹ å¦‚ä½•å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬çš„ Nuxtã€‚'
navigation.icon: i-ph-arrow-circle-up
---

## å‡çº§ Nuxt

### æœ€æ–°ç‰ˆæœ¬

è¦å‡çº§åˆ° Nuxt çš„[æœ€æ–°ç‰ˆæœ¬](https://github.com/nuxt/nuxt/releases)ï¼Œè¯·ä½¿ç”¨ `nuxi upgrade` å‘½ä»¤ã€‚

::package-managers

```bash [npm]
npx nuxi upgrade
```

```bash [yarn]
yarn dlx nuxi upgrade
```

```bash [pnpm]
pnpm dlx nuxi upgrade
```

```bash [bun]
bun x nuxi upgrade
```

::

### å¤œé—´å‘å¸ƒé¢‘é“

è¦ä½¿ç”¨æœ€æ–°çš„ Nuxt æ„å»ºå¹¶æµ‹è¯•å°šæœªå‘å¸ƒçš„æ–°åŠŸèƒ½ï¼Œè¯·é˜…è¯»å…³äº[å¤œé—´å‘å¸ƒæ¸ é“](/docs/guide/going-further/nightly-release-channel)æŒ‡å—ã€‚

::alert{type="warning"}
`latest` æ ‡ç­¾çš„å¤œé—´å‘å¸ƒæ¸ é“å½“å‰æ­£åœ¨è·Ÿè¸ª Nuxt v4 åˆ†æ”¯ï¼Œè¿™æ„å‘³ç€å®ƒç°åœ¨ç‰¹åˆ«æœ‰å¯èƒ½å‡ºç°é‡å¤§å˜æ›´ - è¯·å°å¿ƒï¼

æ‚¨å¯ä»¥ä½¿ç”¨ `"nuxt": "npm:nuxt-nightly@3x"` é€‰æ‹©åŠ å…¥ 3.x åˆ†æ”¯çš„å¤œé—´å‘å¸ƒã€‚
::

## æµ‹è¯• Nuxt 4

Nuxt 4 çš„å‘å¸ƒæ—¥æœŸ**å¾…å®š**ã€‚å®ƒå–å†³äºåœ¨ Nitro çš„é‡å¤§å‘å¸ƒä¹‹åæ˜¯å¦æœ‰è¶³å¤Ÿçš„æ—¶é—´åœ¨ç¤¾åŒºä¸­è¿›è¡Œé€‚å½“çš„æµ‹è¯•ã€‚ä½ å¯ä»¥åœ¨[è¿™ä¸ªæ‹‰å–è¯·æ±‚](https://github.com/unjs/nitro/pull/2521)ä¸­è·Ÿè¸ª Nitro å‘å¸ƒçš„è¿›åº¦ ã€‚

åœ¨å‘å¸ƒä¹‹å‰ï¼Œå¯ä»¥ä» Nuxt 3.12+ ç‰ˆæœ¬æµ‹è¯• Nuxt 4 çš„è®¸å¤šé‡å¤§å˜åŒ–ã€‚

::tip{icon="i-ph-video" to="https://www.youtube.com/watch?v=r4wFKlcJK6c" target="_blank"}
è§‚çœ‹ Alexander Lichter çš„è§†é¢‘ï¼Œäº†è§£å¦‚ä½•å·²ç»é€‰æ‹©åŠ å…¥ Nuxt 4 çš„ç ´åæ€§æ›´æ”¹ã€‚
::

### é€‰æ‹©åŠ å…¥ Nuxt 4

é¦–å…ˆï¼Œå°† Nuxt å‡çº§åˆ°[æœ€æ–°ç‰ˆæœ¬](https://github.com/nuxt/nuxt/releases)ã€‚

ç„¶åï¼Œä½ å¯ä»¥å°†ä½ çš„ `compatibilityVersion` è®¾ç½®ä¸ºåŒ¹é… Nuxt 4 çš„è¡Œä¸ºï¼š

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  future: {
    compatibilityVersion: 4,
  },
  // To re-enable _all_ Nuxt v3 behavior, set the following options:
  // srcDir: '.',
  // dir: {
  //   app: 'app'
  // },
  // experimental: {
  //   sharedPrerenderData: false,
  //   compileTemplate: true,
  //   resetAsyncDataToUndefined: true,
  //   templateUtils: true,
  //   relativeWatchPaths: true,
  //   normalizeComponentNames: false
  //   defaults: {
  //     useAsyncData: {
  //       deep: true
  //     }
  //   }
  // },
  // unhead: {
  //   renderSSRHeadOptions: {
  //     omitLineBreaks: false
  //   }
  // }
})
```

å½“ä½ å°†ä½ çš„ `compatibilityVersion` è®¾ç½®ä¸º `4` æ—¶ï¼Œåœ¨ä½ çš„ Nuxt é…ç½®ä¸­çš„é»˜è®¤è®¾ç½®å°†ä¼šæ”¹å˜ï¼Œä»¥é€‰æ‹©ä½¿ç”¨ Nuxt v4 çš„è¡Œä¸ºï¼Œä½†æ˜¯ä½ å¯ä»¥åœ¨æµ‹è¯•æ—¶é€ä¸ªé‡æ–°å¯ç”¨ Nuxt v3 çš„è¡Œä¸ºï¼Œéµå¾ªä¸Šé¢æ³¨é‡Šæ‰çš„è¡Œã€‚å¦‚æœè¿™æ ·åšï¼Œè¯·æäº¤é—®é¢˜ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥åœ¨ Nuxt æˆ–ç”Ÿæ€ç³»ç»Ÿä¸­è§£å†³å®ƒä»¬ã€‚

### è¿ç§»åˆ° Nuxt 4

è¿™é‡Œå°†è®°å½•ä»»ä½•ç ´åæ€§æˆ–é‡å¤§æ›´æ”¹ï¼Œä»¥åŠä¸ºå‘å/å‘å‰å…¼å®¹æ€§æä¾›çš„è¿ç§»æ­¥éª¤ã€‚

::alert
æœ¬èŠ‚å†…å®¹å¯èƒ½ä¼šåœ¨æœ€ç»ˆå‘å¸ƒå‰è¿›è¡Œæ›´æ”¹ï¼Œå› æ­¤å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ `compatibilityVersion: 4` æµ‹è¯• Nuxt 4ï¼Œè¯·å®šæœŸå›åˆ°è¿™é‡ŒæŸ¥çœ‹ã€‚
::

#### ä½¿ç”¨ Codemods è¿ç§»

ä¸ºäº†ç®€åŒ–å‡çº§è¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¸ [Codemod](https://github.com/codemod-com/codemod) å›¢é˜Ÿåˆä½œï¼Œä½¿ç”¨ä¸€äº›å¼€æºçš„ codemods è‡ªåŠ¨åŒ–äº†è®¸å¤šè¿ç§»æ­¥éª¤ã€‚

::note
å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·ä½¿ç”¨ `npx codemod feedback` å‘ Codemod å›¢é˜ŸæŠ¥å‘Š ğŸ™
::

è¦è·å– Nuxt 4 æ‰€æœ‰ codemods çš„å®Œæ•´åˆ—è¡¨ï¼Œæ¯ä¸ª codemod çš„è¯¦ç»†ä¿¡æ¯ã€æ¥æºä»¥åŠè¿è¡Œå®ƒä»¬çš„å„ç§æ–¹æ³•ï¼Œè¯·è®¿é—® [Codemod Registry](https://go.codemod.com/codemod-registry)ã€‚

ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ `codemod` é…æ–¹è¿è¡Œæœ¬æŒ‡å—ä¸­æåˆ°çš„æ‰€æœ‰ codemodsï¼š

```bash
npx codemod@latest nuxt/4/migration-recipe
```

æ­¤å‘½ä»¤å°†æŒ‰é¡ºåºæ‰§è¡Œæ‰€æœ‰ codemodsï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä¸å¸Œæœ›è¿è¡Œçš„ä»»ä½• codemodã€‚æ¯ä¸ª codemod åŠå…¶ç›¸åº”çš„æ›´æ”¹ä¹Ÿåˆ—åœ¨ä¸‹é¢ï¼Œå¯ä»¥ç‹¬ç«‹æ‰§è¡Œã€‚

#### æ–°ç›®å½•ç»“æ„

ğŸš¦ **å½±å“çº§åˆ«**ï¼šé‡å¤§

Nuxt ç°åœ¨é»˜è®¤ä½¿ç”¨æ–°çš„ç›®å½•ç»“æ„ï¼Œå¹¶ä¸”å‘åå…¼å®¹ï¼ˆå¦‚æœNuxtæ£€æµ‹åˆ°æ‚¨æ­£åœ¨ä½¿ç”¨æ—§ç»“æ„ï¼Œä¾‹å¦‚é¡¶çº§ `pages/` ç›®å½•ï¼Œåˆ™ä¸ä¼šåº”ç”¨æ–°çš„ç»“æ„ï¼‰ã€‚

ğŸ‘‰ [æŸ¥çœ‹å®Œæ•´çš„ RFC](https://github.com/nuxt/nuxt/issues/26444)

##### å‘ç”Ÿäº†å“ªäº›å˜åŒ–

* Nuxt çš„æ–°é»˜è®¤ `srcDir` æ˜¯ `app/`ï¼Œå¤§å¤šæ•°ä¸œè¥¿éƒ½æ˜¯ä»é‚£é‡Œè§£æçš„ã€‚
* `serverDir` ç°åœ¨é»˜è®¤ä¸º `<rootDir>/server` è€Œä¸æ˜¯ `<srcDir>/server`
* `layers/`ã€`modules/` å’Œ `public/` é»˜è®¤æƒ…å†µä¸‹æ˜¯ç›¸å¯¹äº `<rootDir>` è§£æçš„
* å¦‚æœä½¿ç”¨ [Nuxt Content v2.13+](https://github.com/nuxt/content/pull/2649)ï¼Œ`content/` æ˜¯ç›¸å¯¹äº `<rootDir>` è§£æçš„
* æ·»åŠ äº†ä¸€ä¸ªæ–°çš„ `dir.app`ï¼Œè¿™æ˜¯æˆ‘ä»¬å¯»æ‰¾ `router.options.ts` å’Œ `spa-loading-template.html` çš„ç›®å½• - è¿™ä¸ªé»˜è®¤æ˜¯ `<srcDir>/`

<details>

<summary>ä¸€ä¸ª v4 ç‰ˆæœ¬çš„æ–‡ä»¶å¤¹ç»“æ„ç¤ºä¾‹ã€‚</summary>

```sh
.output/
.nuxt/
app/
  assets/
  components/
  composables/
  layouts/
  middleware/
  pages/
  plugins/
  utils/
  app.config.ts
  app.vue
  router.options.ts
content/
layers/
modules/
node_modules/
public/
server/
  api/
  middleware/
  plugins/
  routes/
  utils/
nuxt.config.ts
```

</details>

ğŸ‘‰æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[å®æ–½æ­¤æ›´æ”¹çš„ PR](https://github.com/nuxt/nuxt/pull/27029)ã€‚

##### å˜æ›´åŸå› 

1. **æ€§èƒ½** - å°†æ‰€æœ‰ä»£ç æ”¾åœ¨ä»“åº“çš„æ ¹ç›®å½•ä¸­ä¼šå¯¼è‡´ `.git/` å’Œ `node_modules/` æ–‡ä»¶å¤¹è¢« FS ç›‘è§†å™¨æ‰«æ/åŒ…å«ï¼Œè¿™å¯èƒ½ä¼šåœ¨é Mac OS ä¸Šæ˜¾è‘—å»¶è¿Ÿå¯åŠ¨ã€‚
1. **IDE ç±»å‹å®‰å…¨** - `server/` å’Œä½ çš„åº”ç”¨çš„å…¶ä»–éƒ¨åˆ†åœ¨ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼Œæœ‰ä¸åŒçš„å…¨å±€å¯¼å…¥å¯ç”¨ï¼Œç¡®ä¿ `server/` ä¸åœ¨åº”ç”¨çš„å…¶ä½™éƒ¨åˆ†æ‰€åœ¨çš„åŒä¸€æ–‡ä»¶å¤¹å†…ï¼Œæ˜¯ç¡®ä¿ä½ åœ¨ IDE ä¸­è·å¾—è‰¯å¥½è‡ªåŠ¨å®ŒæˆåŠŸèƒ½çš„é‡è¦ç¬¬ä¸€æ­¥ã€‚

è¿ç§»æ­¥éª¤

1. åˆ›å»ºä¸€ä¸ªåä¸º `app/` çš„æ–°ç›®å½•ã€‚
1. å°†ä½ çš„ `assets/`, `components/`, `composables/`, `layouts/`, `middleware/`, `pages/`, `plugins/` å’Œ `utils/` æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°å…¶ä¸­ï¼Œä»¥åŠ `app.vue`, `error.vue`, `app.config.ts`ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ª `app/router-options.ts` æˆ– `app/spa-loading-template.html`ï¼Œè¿™äº›è·¯å¾„ä¿æŒä¸å˜ã€‚
1. ç¡®ä¿ä½ çš„ `nuxt.config.ts`, `content/`, `layers/`, `modules/`, `public/` å’Œ `server/` æ–‡ä»¶å¤¹ä¿æŒåœ¨å¤–éƒ¨çš„ `app/` æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œåœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸­ã€‚

::tip
ä½ å¯ä»¥é€šè¿‡è¿è¡Œ `npx codemod@latest nuxt/4/file-structure` æ¥è‡ªåŠ¨åŒ–è¿™ä¸ªè¿ç§»è¿‡ç¨‹ã€‚
::

ç„¶è€Œï¼Œè¿ç§»å¹¶ä¸æ˜¯å¿…é¡»çš„ã€‚å¦‚æœæ‚¨å¸Œæœ›ä¿ç•™ç°æœ‰çš„æ–‡ä»¶å¤¹ç»“æ„ï¼ŒNuxt åº”è¯¥èƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹åˆ°å®ƒï¼ˆå¦‚æœå®ƒæ²¡æœ‰ï¼Œè¯·æå‡ºä¸€ä¸ªé—®é¢˜ï¼‰ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯å¦‚æœæ‚¨å·²ç»æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„ `srcDir`ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨åº”è¯¥çŸ¥é“æ‚¨çš„ `modules/`ï¼Œ`public/` å’Œ `server/` æ–‡ä»¶å¤¹å°†ä¼šåœ¨æ‚¨çš„ `rootDir` è€Œä¸æ˜¯æ‚¨çš„è‡ªå®šä¹‰ `srcDir` ä¸­è§£æã€‚å¦‚æœæ‚¨éœ€è¦ï¼Œå¯ä»¥é€šè¿‡é…ç½® `dir.modules`ï¼Œ`dir.public` å’Œ `serverDir` æ¥è¦†ç›–è¿™ä¸€ç‚¹ã€‚

æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®å¼ºåˆ¶ä½¿ç”¨ v3 æ–‡ä»¶å¤¹ç»“æ„ï¼š

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  // This reverts the new srcDir default from `app` back to your root directory
  srcDir: '.',
  // This specifies the directory prefix for `app/router.options.ts` and `app/spa-loading-template.html`
  dir: {
    app: 'app'
  }
})
```

#### æ ‡å‡†åŒ–ç»„ä»¶åç§°

ğŸš¦ **å½±å“çº§åˆ«**ï¼šä¸­ç­‰

Vue ç°åœ¨å°†ç”Ÿæˆä¸ Nuxt ç»„ä»¶å‘½åæ¨¡å¼ç›¸åŒ¹é…çš„ç»„ä»¶åç§°ã€‚

##### å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–

é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä½ æ²¡æœ‰æ‰‹åŠ¨è®¾ç½®ï¼ŒVue å°†åˆ†é…ä¸€ä¸ªä¸ç»„ä»¶æ–‡ä»¶ååŒ¹é…çš„ç»„ä»¶åç§°ã€‚

```bash [Directory structure]
â”œâ”€ components/
â”œâ”€â”€â”€ SomeFolder/
â”œâ”€â”€â”€â”€â”€ MyComponent.vue
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç»„ä»¶çš„åç§°å°†æ˜¯ `MyComponent`ï¼Œå°±Vueè€Œè¨€ã€‚å¦‚æœä½ æƒ³ç”¨ `<KeepAlive>` ä½¿ç”¨å®ƒï¼Œæˆ–è€…åœ¨ Vue DevTools ä¸­è¯†åˆ«å®ƒï¼Œä½ éœ€è¦ä½¿ç”¨è¿™ä¸ªåå­—ã€‚

ä½†æ˜¯ï¼Œä¸ºäº†è‡ªåŠ¨å¯¼å…¥å®ƒï¼Œä½ éœ€è¦ä½¿ç”¨ `SomeFolderMyComponent`ã€‚

æœ‰äº†è¿™ä¸ªå˜åŒ–ï¼Œè¿™ä¸¤ä¸ªå€¼å°†ä¼šåŒ¹é…ï¼ŒVue å°†ç”Ÿæˆä¸€ä¸ªä¸ Nuxt ç»„ä»¶å‘½åæ¨¡å¼åŒ¹é…çš„ç»„ä»¶åç§°ã€‚

##### è¿ç§»æ­¥éª¤

ç¡®ä¿ä½ åœ¨ä»»ä½•ä½¿ç”¨ `@vue/test-utils` çš„ `findComponent` çš„æµ‹è¯•ä¸­ï¼Œä»¥åŠåœ¨ä»»ä½•ä¾èµ–äºä½ çš„ç»„ä»¶åç§°çš„ `<KeepAlive>` ä¸­ä½¿ç”¨æ›´æ–°çš„åç§°ã€‚

æˆ–è€…ï¼Œç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ç¦ç”¨è¿™ä¸ªè¡Œä¸ºï¼š

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    normalizeComponentNames: false
  }
})
```

#### å…±äº«é¢„æ¸²æŸ“æ•°æ®

ğŸš¦ **å½±å“çº§åˆ«**: ä¸­

##### å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–

æˆ‘ä»¬å¯ç”¨äº†ä¹‹å‰çš„ä¸€ä¸ªå®éªŒæ€§ç‰¹æ€§ï¼Œè¯¥ç‰¹æ€§å…è®¸åœ¨ä¸åŒçš„é¡µé¢ä¹‹é—´å…±äº«æ¥è‡ª `useAsyncData` å’Œ `useFetch` è°ƒç”¨çš„æ•°æ®ã€‚æŸ¥çœ‹[åŸå§‹ PR](https://github.com/nuxt/nuxt/pull/24894)ã€‚

##### å˜æ›´åŸå› 

æ­¤åŠŸèƒ½ä¼šè‡ªåŠ¨åœ¨é¢„æ¸²æŸ“çš„é¡µé¢ä¹‹é—´å…±äº«æ•°æ®è´Ÿè½½ã€‚å½“é¢„æ¸²æŸ“ä½¿ç”¨ `useAsyncData` æˆ– `useFetch` å¹¶ä»ä¸åŒé¡µé¢è·å–ç›¸åŒæ•°æ®çš„ç½‘ç«™æ—¶ï¼Œè¿™å¯èƒ½ä¼šå¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„ç½‘ç«™éœ€è¦åœ¨æ¯ä¸ªé¡µé¢ä¸­è°ƒç”¨ `useFetch`ï¼ˆä¾‹å¦‚ï¼Œä¸ºèœå•è·å–å¯¼èˆªæ•°æ®ï¼Œæˆ–ä» CMS è·å–ç½‘ç«™è®¾ç½®ï¼‰ï¼Œé‚£ä¹ˆå½“é¢„æ¸²æŸ“ç¬¬ä¸€ä¸ªä½¿ç”¨è¯¥æ•°æ®çš„é¡µé¢æ—¶ï¼Œè¯¥æ•°æ®åªä¼šè¢«è·å–ä¸€æ¬¡ï¼Œç„¶åè¢«ç¼“å­˜ä»¥ä¾›åœ¨å…¶ä»–é¡µé¢é¢„æ¸²æŸ“æ—¶ä½¿ç”¨ã€‚

##### è¿ç§»æ­¥éª¤

ç¡®ä¿ä½ çš„æ•°æ®çš„ä»»ä½•å”¯ä¸€é”®æ€»æ˜¯å¯ä»¥è§£æä¸ºç›¸åŒçš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ ä½¿ç”¨ `useAsyncData` æ¥è·å–ä¸ç‰¹å®šé¡µé¢ç›¸å…³çš„æ•°æ®ï¼Œä½ åº”è¯¥æä¾›ä¸€ä¸ªå”¯ä¸€åŒ¹é…è¯¥æ•°æ®çš„é”®ã€‚ï¼ˆ`useFetch` åº”è¯¥ä¸ºä½ è‡ªåŠ¨å®Œæˆè¿™ä¸€ç‚¹ã€‚ï¼‰

```ts [app/pages/test/[slug\\].vue]
// This would be unsafe in a dynamic page (e.g. `[slug].vue`) because the route slug makes a difference
// to the data fetched, but Nuxt can't know that because it's not reflected in the key.
const route = useRoute()
const { data } = await useAsyncData(async () => {
  return await $fetch(`/api/my-page/${route.params.slug}`)
})
// Instead, you should use a key that uniquely identifies the data fetched.
const { data } = await useAsyncData(route.params.slug, async () => {
  return await $fetch(`/api/my-page/${route.params.slug}`)
})
```

æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¦ç”¨æ­¤åŠŸèƒ½ï¼š

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    sharedPrerenderData: false
  }
})
```

#### `useAsyncData` å’Œ `useFetch` ä¸­ `data` å’Œ `error` çš„é»˜è®¤å€¼

ğŸš¦ **å½±å“çº§åˆ«**: æœ€å°

##### æ›´æ”¹å†…å®¹

`useAsyncData` è¿”å›çš„ `data` å’Œ `error` å¯¹è±¡ç°åœ¨å°†é»˜è®¤ä¸º `undefined`ã€‚

##### æ›´æ”¹åŸå› 

ä¹‹å‰ `data` è¢«åˆå§‹åŒ–ä¸º `null`ï¼Œä½†åœ¨ `clearNuxtData` ä¸­é‡ç½®ä¸º `undefined`ã€‚`error` è¢«åˆå§‹åŒ–ä¸º `null`ã€‚è¿™ä¸€å˜åŒ–æ˜¯ä¸ºäº†å¸¦æ¥æ›´å¤§çš„ä¸€è‡´æ€§ã€‚

##### è¿ç§»æ­¥éª¤

å¦‚æœæ‚¨ä¹‹å‰åœ¨æ£€æŸ¥ `data.value` æˆ– `error.value` æ˜¯å¦ä¸º `null`ï¼Œæ‚¨å¯ä»¥æ›´æ–°è¿™äº›æ£€æŸ¥ä»¥æ£€æŸ¥ `undefined` è€Œä¸æ˜¯ `null`ã€‚

::tip
ä½ å¯ä»¥é€šè¿‡è¿è¡Œ `npx codemod@latest nuxt/4/default-data-error-value` æ¥è‡ªåŠ¨åŒ–è¿™ä¸€æ­¥éª¤ã€‚
::

å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ¢å¤åˆ°ä»¥å‰çš„è¡Œä¸ºï¼š

```ts twoslash [nuxt.config.ts]
// @errors: 2353
export default defineNuxtConfig({
  experimental: {
    defaults: {
      useAsyncData: {
        value: 'null',
        errorValue: 'null'
      }
    }
  }
})
```

è¯·æŠ¥å‘Šé—®é¢˜ï¼Œå¦‚æœæ‚¨æ­£åœ¨è¿™æ ·åšï¼Œå› ä¸ºæˆ‘ä»¬ä¸æ‰“ç®—ä¿æŒè¿™ä¸€ç‚¹ä½œä¸ºå¯é…ç½®çš„ã€‚

#### ç§»é™¤ `useAsyncData` å’Œ `useFetch` ä¸­è°ƒç”¨ `refresh` æ—¶çš„ `dedupe` é€‰é¡¹çš„å¼ƒç”¨ `boolean` å€¼

ğŸš¦ **å½±å“çº§åˆ«**: æœ€å°

##### å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–

ä»¥å‰ï¼Œå¯ä»¥å°† `dedupe: boolean` ä¼ é€’ç»™ `refresh`ã€‚è¿™äº›æ˜¯ `cancel` (`true`) å’Œ `defer` (`false`) çš„åˆ«åã€‚

```ts twoslash [app.vue]
// @errors: 2322
const { refresh } = await useAsyncData(async () => ({ message: 'Hello, Nuxt 3!' }))

async function refreshData () {
  await refresh({ dedupe: true })
}
```

##### å˜æ›´åŸå› 

è¿™äº›åˆ«åè¢«ç§»é™¤ï¼Œä»¥æé«˜æ¸…æ™°åº¦ã€‚

å½“å°† `dedupe` ä½œä¸ºé€‰é¡¹æ·»åŠ åˆ° `useAsyncData` æ—¶ï¼Œé—®é¢˜å‡ºç°äº†ï¼Œæˆ‘ä»¬ç§»é™¤äº†å¸ƒå°”å€¼ï¼Œå› ä¸ºå®ƒä»¬æœ€ç»ˆå˜æˆäº†å½¼æ­¤çš„ç›¸åã€‚

`refresh({ dedupe: false })` æ„å‘³ç€â€œä¸è¦ä¸ºäº†è¿™ä¸ªæ–°çš„è¯·æ±‚è€Œ_å–æ¶ˆ_ç°æœ‰è¯·æ±‚â€ã€‚ä½†åœ¨ `useAsyncData` çš„é€‰é¡¹ä¸­ä¼ é€’ `dedupe: true` æ„å‘³ç€â€œå¦‚æœå­˜åœ¨ä¸€ä¸ªç°æœ‰çš„å¾…å¤„ç†è¯·æ±‚ï¼Œå°±ä¸è¦å‘èµ·ä»»ä½•æ–°çš„è¯·æ±‚â€ã€‚ï¼ˆè¯¦è§[è¿™ä¸ªæ‹‰å»è¯·æ±‚](https://github.com/nuxt/nuxt/pull/24564#pullrequestreview-1764584361)ï¼‰

##### è¿ç§»æ­¥éª¤

è¿ç§»åº”è¯¥æ˜¯ç›´æ¥çš„ï¼š

```diff
  const { refresh } = await useAsyncData(async () => ({ message: 'Hello, Nuxt 3!' }))
  
  async function refreshData () {
-   await refresh({ dedupe: true })
+   await refresh({ dedupe: 'cancel' })

-   await refresh({ dedupe: false })
+   await refresh({ dedupe: 'defer' })
  }
```

::tip
ä½ å¯ä»¥é€šè¿‡è¿è¡Œ `npx codemod@latest nuxt/4/deprecated-dedupe-value` æ¥è‡ªåŠ¨åŒ–è¿™ä¸€æ­¥éª¤ã€‚
::

#### åœ¨ `useAsyncData` å’Œ `useFetch` ä¸­æ¸…é™¤ `data` æ—¶å°Šé‡é»˜è®¤å€¼

ğŸš¦ **å½±å“çº§åˆ«**: æœ€å°

##### å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–

å¦‚æœä½ ä¸º `useAsyncData` æä¾›äº†è‡ªå®šä¹‰çš„ `default` å€¼ï¼Œç°åœ¨åœ¨è°ƒç”¨ `clear` æˆ– `clearNuxtData` æ—¶ï¼Œå®ƒå°†è¢«é‡ç½®ä¸ºå…¶é»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯ç®€å•åœ°è¢«åˆ é™¤ã€‚

##### å˜æ›´åŸå› 

ç”¨æˆ·ç»å¸¸è®¾ç½®ä¸€ä¸ªé€‚å½“çš„ç©ºå€¼ï¼Œæ¯”å¦‚ä¸€ä¸ªç©ºæ•°ç»„ï¼Œä»¥é¿å…åœ¨è¿­ä»£æ—¶éœ€è¦æ£€æŸ¥ `null`/`undefined`ã€‚åœ¨é‡ç½®/æ¸…é™¤æ•°æ®æ—¶ï¼Œåº”è¯¥å°Šé‡è¿™ä¸€ç‚¹ã€‚

##### è¿ç§»æ­¥éª¤

å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œä½ å¯ä»¥æš‚æ—¶æ¢å¤åˆ°ä»¥å‰çš„è¡Œä¸ºï¼Œæ–¹æ³•æ˜¯ï¼š

```ts twoslash [nuxt.config.ts]
// @errors: 2353
export default defineNuxtConfig({
  experimental: {
    resetAsyncDataToUndefined: true,
  }
})
```

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜ï¼Œè¯·æŠ¥å‘Šï¼Œå› ä¸ºæˆ‘ä»¬ä¸æ‰“ç®—å°†å…¶ä½œä¸ºå¯é…ç½®é¡¹ä¿ç•™ã€‚

#### `useAsyncData` å’Œ `useFetch` ä¸­çš„æµ…å±‚æ•°æ®å“åº”æ€§

ğŸš¦ **å½±å“çº§åˆ«**: æœ€å°

`useAsyncData`ã€`useFetch`ã€`useLazyAsyncData` å’Œ `useLazyFetch` è¿”å›çš„ `data` å¯¹è±¡ç°åœ¨æ˜¯ä¸€ä¸ª `shallowRef` è€Œä¸æ˜¯ `ref`ã€‚

##### å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–

å½“è·å–æ–°æ•°æ®æ—¶ï¼Œä»»ä½•ä¾èµ–äº `data` çš„å†…å®¹ä»ç„¶ä¼šæ˜¯å“åº”å¼çš„ï¼Œå› ä¸ºæ•´ä¸ªå¯¹è±¡éƒ½è¢«æ›¿æ¢äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ çš„ä»£ç æ›´æ”¹äº†è¯¥æ•°æ®ç»“æ„å†…çš„å±æ€§ï¼Œè¿™ä¸ä¼šè§¦å‘ä½ çš„åº”ç”¨ä¸­çš„ä»»ä½•å“åº”æ€§ã€‚

##### æ›´æ”¹çš„åŸå› 

è¿™ä¸ºæ·±åº¦åµŒå¥—çš„å¯¹è±¡å’Œæ•°ç»„å¸¦æ¥äº†**æ˜¾è‘—**çš„æ€§èƒ½æå‡ï¼Œå› ä¸º Vue ä¸éœ€è¦ç›‘è§†æ¯ä¸ªå±æ€§/æ•°ç»„è¿›è¡Œä¿®æ”¹ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ`data` ä¹Ÿåº”è¯¥æ˜¯ä¸å˜çš„ã€‚

##### è¿ç§»æ­¥éª¤

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸éœ€è¦ä»»ä½•è¿ç§»æ­¥éª¤ï¼Œä½†æ˜¯å¦‚æœä½ ä¾èµ–äºæ•°æ®å¯¹è±¡çš„å“åº”æ€§ï¼Œé‚£ä¹ˆä½ æœ‰ä¸¤ç§é€‰æ‹©ï¼š

1. You can granularly opt in to deep reactivity on a per-composable basis:
   ```diff
   - const { data } = useFetch('/api/test')
   + const { data } = useFetch('/api/test', { deep: true })
   ```
1. You can change the default behavior on a project-wide basis (not recommended):
   ```ts twoslash [nuxt.config.ts]
   export default defineNuxtConfig({
     experimental: {
       defaults: {
         useAsyncData: {
           deep: true
         }
       }
     }
   })
   ```

::tip
å¦‚æœä½ éœ€è¦ï¼Œä½ å¯ä»¥é€šè¿‡è¿è¡Œ `npx codemod@latest nuxt/4/shallow-function-reactivity` æ¥è‡ªåŠ¨åŒ–è¿™ä¸€æ­¥ã€‚
::

#### `builder:watch` ä¸­ç»å¯¹è·¯å¾„çš„ç›‘è§†

ğŸš¦ **å½±å“çº§åˆ«**: æœ€å°

##### å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–

Nuxt çš„ `builder:watch` é’©å­ç°åœ¨å‘å‡ºçš„æ˜¯ç›¸å¯¹äºä½ çš„é¡¹ç›® `srcDir` çš„ç»å¯¹è·¯å¾„ï¼Œè€Œä¸æ˜¯ç›¸å¯¹è·¯å¾„ã€‚

##### å˜æ›´åŸå› 

è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ”¯æŒç›‘è§†é¡¹ç›® `srcDir` ä¹‹å¤–çš„è·¯å¾„ï¼Œå¹¶ä¸ºå±‚å’Œå…¶ä»–æ›´å¤æ‚çš„æ¨¡å¼æä¾›äº†æ›´å¥½çš„æ”¯æŒã€‚

##### è¿ç§»æ­¥éª¤

æˆ‘ä»¬å·²ç»ä¸»åŠ¨è¿ç§»äº†æˆ‘ä»¬çŸ¥é“ä½¿ç”¨è¿™ä¸ªé’©å­çš„å…¬å…± Nuxt æ¨¡å—ã€‚æŸ¥çœ‹[é—®é¢˜ #25339](https://github.com/nuxt/nuxt/issues/25339)ã€‚

ç„¶è€Œï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªä½¿ç”¨ `builder:watch` é’©å­çš„æ¨¡å—ä½œè€…ï¼Œå¹¶ä¸”å¸Œæœ›ä¿æŒå‘å/å‘å‰å…¼å®¹æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥ç¡®ä¿ä½ çš„ä»£ç åœ¨ Nuxt v3 å’Œ Nuxt v4 ä¸­éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼š

```diff
+ import { relative, resolve } from 'node:fs'
  // ...
  nuxt.hook('builder:watch', async (event, path) => {
+   path = relative(nuxt.options.srcDir, resolve(nuxt.options.srcDir, path))
    // ...
  })
```

::tip
ä½ å¯ä»¥é€šè¿‡è¿è¡Œ `npx codemod@latest nuxt/4/absolute-watch-path` æ¥è‡ªåŠ¨åŒ–è¿™ä¸€æ­¥éª¤ã€‚
::

#### ç§»é™¤ `window.__NUXT__` å¯¹è±¡

##### æ›´æ”¹å†…å®¹

æˆ‘ä»¬åœ¨åº”ç”¨å®Œæˆ hydration åï¼Œç§»é™¤äº†å…¨å±€çš„ `window.__NUXT__` å¯¹è±¡ã€‚

##### æ›´æ”¹åŸå› 

è¿™ä¸ºå¤šåº”ç”¨æ¨¡å¼ï¼ˆ[#21635](https://github.com/nuxt/nuxt/issues/21635)ï¼‰é“ºå¹³äº†é“è·¯ï¼Œå¹¶ä½¿æˆ‘ä»¬èƒ½å¤Ÿä¸“æ³¨äºå•ä¸€çš„æ–¹å¼æ¥è®¿é—® Nuxt åº”ç”¨æ•°æ® - `useNuxtApp()`ã€‚

##### è¿ç§»æ­¥éª¤

æ•°æ®ä»ç„¶å¯ç”¨ï¼Œä½†å¯ä»¥é€šè¿‡ `useNuxtApp().payload` è®¿é—®ï¼š

```diff
- console.log(window.__NUXT__)
+ console.log(useNuxtApp().payload)
```

#### ç›®å½•ç´¢å¼•æ‰«æ

ğŸš¦ **å½±å“çº§åˆ«**: ä¸­

##### å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–

ä½ çš„ `middleware/` æ–‡ä»¶å¤¹ä¸­çš„å­æ–‡ä»¶å¤¹ä¹Ÿä¼šè¢«æ‰«æä»¥æŸ¥æ‰¾ `index` æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ç°åœ¨ä¹Ÿä¼šåœ¨ä½ çš„é¡¹ç›®ä¸­æ³¨å†Œä¸ºä¸­é—´ä»¶ã€‚

##### å˜æ›´åŸå› 

Nuxt ä¼šè‡ªåŠ¨æ‰«æä¸€äº›æ–‡ä»¶å¤¹ï¼ŒåŒ…æ‹¬ `middleware/` å’Œ `plugins/`ã€‚

ä½ çš„ `plugins/` æ–‡ä»¶å¤¹ä¸­çš„å­æ–‡ä»¶å¤¹ä¼šè¢«æ‰«æä»¥æŸ¥æ‰¾ `index` æ–‡ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ç§è¡Œä¸ºåœ¨æ‰«æçš„ç›®å½•ä¹‹é—´ä¿æŒä¸€è‡´ã€‚

##### è¿ç§»æ­¥éª¤

å¯èƒ½ä¸éœ€è¦è¿ç§»ï¼Œä½†å¦‚æœä½ å¸Œæœ›æ¢å¤åˆ°ä»¥å‰çš„è¡Œä¸ºï¼Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªé’©å­æ¥è¿‡æ»¤æ‰è¿™äº›ä¸­é—´ä»¶ï¼š

```ts
export default defineNuxtConfig({
  hooks: {
    'app:resolve'(app) {
      app.middleware = app.middleware.filter(mw => !/\/index\.[^/]+$/.test(mw.path))
    }
  }
})
```

#### æ¨¡æ¿ç¼–è¯‘å˜åŒ–

ğŸš¦ **å½±å“çº§åˆ«**: æœ€å°

##### å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–

ä»¥å‰ï¼ŒNuxt ä½¿ç”¨ `lodash/template` æ¥ç¼–è¯‘ä½äºæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ¨¡æ¿ï¼Œä½¿ç”¨ `.ejs` æ–‡ä»¶æ ¼å¼/è¯­æ³•ã€‚

æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†ä¸€äº›æ¨¡æ¿å·¥å…·ï¼ˆ`serialize`ï¼Œ`importName`ï¼Œ`importSources`ï¼‰ï¼Œè¿™äº›å·¥å…·å¯ä»¥ç”¨äºè¿™äº›æ¨¡æ¿å†…çš„ä»£ç ç”Ÿæˆï¼Œç°åœ¨è¿™äº›å·¥å…·æ­£åœ¨è¢«ç§»é™¤ã€‚

##### å˜æ›´åŸå› 

åœ¨ Nuxt v3 ä¸­ï¼Œæˆ‘ä»¬è¿ç§»åˆ°äº†ä¸€ä¸ªâ€œè™šæ‹Ÿâ€è¯­æ³•ï¼Œå®ƒåŒ…å«ä¸€ä¸ª `getContents()` å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ›´åŠ çµæ´»å’Œé«˜æ•ˆã€‚

æ­¤å¤–ï¼Œ`lodash/template` ç»å†äº†ä¸€ç³»åˆ—çš„å®‰å…¨é—®é¢˜ã€‚è¿™äº›é—®é¢˜å¹¶ä¸çœŸæ­£é€‚ç”¨äº Nuxt é¡¹ç›®ï¼Œå› ä¸ºå®ƒä»¬åœ¨æ„å»ºæ—¶è€Œä¸æ˜¯è¿è¡Œæ—¶ä½¿ç”¨ï¼Œå¹¶ä¸”ç”±å—ä¿¡ä»»çš„ä»£ç ä½¿ç”¨ã€‚ç„¶è€Œï¼Œå®ƒä»¬ä»ç„¶å‡ºç°åœ¨å®‰å…¨å®¡è®¡ä¸­ã€‚æ­¤å¤–ï¼Œ`lodash` æ˜¯ä¸€ä¸ªåºå¤§çš„ä¾èµ–é¡¹ï¼Œå¤§å¤šæ•°é¡¹ç›®éƒ½ä¸ä½¿ç”¨å®ƒã€‚

æœ€åï¼Œåœ¨ Nuxt ä¸­ç›´æ¥æä¾›ä»£ç åºåˆ—åŒ–å‡½æ•°å¹¶ä¸æ˜¯ç†æƒ³çš„ã€‚ç›¸åï¼Œæˆ‘ä»¬ç»´æŠ¤åƒ [unjs/knitwork](http://github.com/unjs/knitwork) è¿™æ ·çš„é¡¹ç›®ï¼Œå®ƒä»¬å¯ä»¥ä½œä¸ºä½ çš„é¡¹ç›®çš„ä¾èµ–é¡¹ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸è¦æ±‚å‡çº§ Nuxt æœ¬èº«çš„æƒ…å†µä¸‹ç›´æ¥æŠ¥å‘Š/è§£å†³å®‰å…¨é—®é¢˜ã€‚

##### è¿ç§»æ­¥éª¤

æˆ‘ä»¬å·²ç»æå‡ºäº† PR æ¥æ›´æ–°ä½¿ç”¨ EJS è¯­æ³•çš„æ¨¡å—ï¼Œä½†æ˜¯å¦‚æœä½ éœ€è¦è‡ªå·±è¿™æ ·åšï¼Œä½ æœ‰ä¸‰ä¸ªå‘å/å‘å‰å…¼å®¹çš„æ›¿ä»£æ–¹æ¡ˆï¼š

* å°†ä½ çš„å­—ç¬¦ä¸²æ’å€¼é€»è¾‘ç›´æ¥ç§»åŠ¨åˆ° `getContents()`ã€‚

* ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°æ¥å¤„ç†æ›¿æ¢ï¼Œä¾‹å¦‚åœ¨ https://github./nuxt-modules/color-mode/pull/240 ä¸­ã€‚

* ç»§ç»­ä½¿ç”¨ `lodash` ä½œä¸ºä½ é¡¹ç›®çš„ä¾èµ–é¡¹ï¼Œè€Œä¸æ˜¯ Nuxtï¼š

```diff
+ import { readFileSync } from 'node:fs'
+ import { template } from 'lodash-es'
  // ...
  addTemplate({
    fileName: 'appinsights-vue.js'
    options: { /* some options */ },
-   src: resolver.resolve('./runtime/plugin.ejs'),
+   getContents({ options }) {
+     const contents = readFileSync(resolver.resolve('./runtime/plugin.ejs'), 'utf-8')
+     return template(contents)({ options })
+   },
  })
```

æœ€åï¼Œå¦‚æœä½ æ­£åœ¨ä½¿ç”¨æ¨¡æ¿å·¥å…·ï¼ˆ`serialize`ï¼Œ`importName`ï¼Œ`importSources`ï¼‰ï¼Œä½ å¯ä»¥ç”¨ `knitwork` ä¸­çš„å·¥å…·æ›¿æ¢å®ƒä»¬ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```ts
import { genDynamicImport, genImport, genSafeVariableName } from 'knitwork'

const serialize = (data: any) => JSON.stringify(data, null, 2).replace(/"{(.+)}"(?=,?$)/gm, r => JSON.parse(r).replace(/^{(.*)}$/, '$1'))

const importSources = (sources: string | string[], { lazy = false } = {}) => {
  return toArray(sources).map((src) => {
    if (lazy) {
      return `const ${genSafeVariableName(src)} = ${genDynamicImport(src, { comment: `webpackChunkName: ${JSON.stringify(src)}` })}`
    }
    return genImport(src, genSafeVariableName(src))
  }).join('\n')
}

const importName = genSafeVariableName
```

::tip
ä½ å¯ä»¥é€šè¿‡è¿è¡Œ `npx codemod@latest nuxt/4/template-compilation-changes` æ¥è‡ªåŠ¨åŒ–è¿™ä¸€æ­¥éª¤ã€‚
::

#### ç§»é™¤å®éªŒæ€§ç‰¹æ€§

ğŸš¦ **å½±å“çº§åˆ«**: æœ€å°

##### å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–

Nuxt 4 ä¸­ä¸å†æ”¯æŒé…ç½®ä»¥ä¸‹å››ä¸ªå®éªŒæ€§ç‰¹æ€§ï¼š

* `experimental.treeshakeClientOnly` å°†è¢«è®¾ç½®ä¸º `true`ï¼ˆè‡ª v3.0 ä»¥æ¥ä¸ºé»˜è®¤å€¼ï¼‰
* `experimental.configSchema` å°†è¢«è®¾ç½®ä¸º `true`ï¼ˆè‡ª v3.3 ä»¥æ¥ä¸ºé»˜è®¤å€¼ï¼‰
* `experimental.polyfillVueUseHead` å°†è¢«è®¾ç½®ä¸º `false`ï¼ˆè‡ª v3.4 ä»¥æ¥ä¸ºé»˜è®¤å€¼ï¼‰
* `experimental.respectNoSSRHeader` å°†è¢«è®¾ç½®ä¸º `false`ï¼ˆè‡ª v3.4 ä»¥æ¥ä¸ºé»˜è®¤å€¼ï¼‰
* `vite.devBundler` ä¸å†å¯é…ç½® - å®ƒå°†é»˜è®¤ä½¿ç”¨ `vite-node`

##### å˜æ›´åŸå› 

è¿™äº›é€‰é¡¹å·²ç»æœ‰ä¸€æ®µæ—¶é—´è¢«è®¾ç½®ä¸ºå½“å‰å€¼ï¼Œæˆ‘ä»¬æ²¡æœ‰ç†ç”±ç›¸ä¿¡å®ƒä»¬éœ€è¦ä¿æŒå¯é…ç½®ã€‚

##### è¿ç§»æ­¥éª¤

* `polyfillVueUseHead` å¯ä»¥åœ¨ç”¨æˆ·ç«¯ä½¿ç”¨[è¿™ä¸ªæ’ä»¶](https://github.com/nuxt/nuxt/blob/f209158352b09d1986aa320e29ff36353b91c358/packages/nuxt/src/head/runtime/plugins/vueuse-head-polyfill.ts#L10-L11)å®ç°ã€‚

* `respectNoSSRHeader` å¯ä»¥åœ¨ç”¨æˆ·ç«¯ä½¿ç”¨[æœåŠ¡å™¨ä¸­é—´ä»¶](https://github.com/nuxt/nuxt/blob/c660b39447f0d5b8790c0826092638d321cd6821/packages/nuxt/src/core/runtime/nitro/no-ssr.ts#L8-L9)å®ç°ã€‚

## Nuxt 2 å¯¹æ¯” Nuxt 3+

åœ¨ä¸‹è¡¨ä¸­ï¼Œæœ‰ä¸€ä¸ª Nuxt ä¸‰ä¸ªç‰ˆæœ¬çš„å¿«é€Ÿæ¯”è¾ƒï¼š

Feature / Version        | Nuxt 2          | Nuxt Bridge      | Nuxt 3+
-------------------------|-----------------|------------------|---------
Vue                      | 2               | 2                | 3
Stability                | ğŸ˜Š Stable      | ğŸ˜Š Stable         | ğŸ˜Š Stable
Performance              | ğŸ Fast        | âœˆï¸ Faster          | ğŸš€ Fastest
Nitro Engine             | âŒ             | âœ…                | âœ…
ESM support              | ğŸŒ™ Partial     | ğŸ‘ Better         | âœ…
TypeScript               | â˜‘ï¸ Opt-in       | ğŸš§ Partial        | âœ…
Composition API          | âŒ             | ğŸš§ Partial        | âœ…
Options API              | âœ…             | âœ…                | âœ…
Components Auto Import   | âœ…             | âœ…                | âœ…
`<script setup>` syntax  | âŒ             | ğŸš§ Partial        | âœ…
Auto Imports             | âŒ             | âœ…                | âœ…
webpack                  | 4              | 4                 | 5
Vite                     | âš ï¸ Partial      | ğŸš§ Partial        | âœ…
Nuxi CLI                 | âŒ Old         | âœ… nuxi           | âœ… nuxi
Static sites             | âœ…             | âœ…                | âœ…

## Nuxt 2 åˆ° Nuxt 3+

è¿ç§»æŒ‡å—æä¾›äº† Nuxt 2 åŠŸèƒ½åˆ° Nuxt 3+ åŠŸèƒ½çš„é€æ­¥æ¯”è¾ƒï¼Œä»¥åŠæŒ‡å¯¼ä½ é€‚åº”å½“å‰åº”ç”¨ç¨‹åºçš„æŒ‡å—ã€‚

::read-more{to="/docs/migration/overview"}
æŸ¥çœ‹**ä» Nuxt 2 è¿ç§»åˆ° Nuxt 3 çš„æŒ‡å—**ã€‚
::

## Nuxt 2 è¿ç§»åˆ° Nuxt Bridge

å¦‚æœæ‚¨æ›´å€¾å‘äºé€æ­¥å°†æ‚¨çš„ Nuxt 2 åº”ç”¨ç¨‹åºè¿ç§»åˆ° Nuxt 3ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Nuxt Bridgeã€‚Nuxt Bridge æ˜¯ä¸€ä¸ªå…¼å®¹æ€§å±‚ï¼Œå®ƒå…è®¸æ‚¨åœ¨ Nuxt 2 ä¸­ä½¿ç”¨ Nuxt 3+ çš„åŠŸèƒ½ï¼Œå¹¶ä¸”é‡‡ç”¨äº†ä¸€ç§å¯é€‰çš„æœºåˆ¶ã€‚

::read-more{to="/docs/bridge/overview"}
**ä» Nuxt 2 è¿ç§»åˆ° Nuxt Bridge**
::
